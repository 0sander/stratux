<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
  <head>
    <title>
      Stratux
    </title>
    <script src="js/jquery-2.1.4.min.js" type="text/javascript"></script>
    <script src="js/jquery.form.min.js" type="text/javascript"></script>
                <link href="css/stratux.css" rel="stylesheet" media="screen">
  </head>
  <body>
    <script type="text/javascript">
$(document).ready(function() { 
  $('input[name=UAT_Enabled]').change(function(){
    $('#settings').ajaxSubmit({url: 'control.php', type: 'post'})
  });
  $('input[name=ES_Enabled]').change(function(){
    $('#settings').ajaxSubmit({url: 'control.php', type: 'post'})
  });
  $('input[name=GPS_Enabled]').change(function(){
    $('#settings').ajaxSubmit({url: 'control.php', type: 'post'})
  });
  $('input[name=AHRS_Enabled]').change(function(){
    $('#settings').ajaxSubmit({url: 'control.php', type: 'post'})
  });
});
(function worker() {
  $.ajax({
    url: 'control.php', 
    success: function(data) {
      obj = $.parseJSON(data);
      $.each(obj, function(k, v) {
        // Radio values.
        if ((k == "UAT_Enabled") || (k == "ES_Enabled") || (k == "GPS_Enabled") || (k == "AHRS_Enabled")) {
          $('[name=' + k + ']').val([v.toString()]);
        }
        $('#' + k).text(v);
      });

    },
    complete: function() {
      // Schedule the next request when the current one is complete.
      setTimeout(worker, 1000);
    }
  });
})();

    </script>

    <div id="stratux-main" class="well well-large">
      <h1>Stratux</h1>
   
      <div class="panel panel-default"> 
        <div class="panel-heading">Status</div>
        <div class="panel-body">
          RTL-SDR devices: <span id="Devices">1</span><br>
          Clients connected: <span id="Connected_Users">2</span><br>
          Current firmware: <span id="Version">v0.1</span><br>
          UAT msgs: <span id="UAT_messages_last_minute"></span> / <span id="UAT_messages_max"></span><br>
          1090ES msgs: <span id="ES_messages_last_minute"></span> / <span id="ES_messages_max"></span><br>
          GPS satellites: <span id="GPS_satellites_locked"></span><br>
          AHRS: <span id="RY835AI_connected"></span><br>
          Uptime: <span id="Uptime"></span><br>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">Settings</div>
        <div class="panel-body form-horizontal">
          <div class="form-group">
            <label class="control-label col-sm-4">978MHz</label>
            <div class="col-sm-1">
              <div class="onoffswitch">
                  <input type="checkbox" name="UAT_Enabled" class="onoffswitch-checkbox" id="uat-onoffswitch" checked>
                  <label class="onoffswitch-label" for="uat-onoffswitch">
                      <span class="onoffswitch-inner"></span>
                      <span class="onoffswitch-switch"></span>
                  </label>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-4">1090MHz</label>
            <div class="col-sm-1">
              <div class="onoffswitch">
                  <input type="checkbox" name="ES_Enabled" class="onoffswitch-checkbox" id="es-onoffswitch" checked>
                  <label class="onoffswitch-label" for="es-onoffswitch">
                      <span class="onoffswitch-inner"></span>
                      <span class="onoffswitch-switch"></span>
                  </label>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-4">GPS</label>
            <div class="col-sm-1">
              <div class="onoffswitch">
                  <input type="checkbox" name="GPS_Enabled" class="onoffswitch-checkbox" id="gps-onoffswitch" checked>
                  <label class="onoffswitch-label" for="gps-onoffswitch">
                      <span class="onoffswitch-inner"></span>
                      <span class="onoffswitch-switch"></span>
                  </label>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-4">AHRS</label>
            <div class="col-sm-1">
              <div class="onoffswitch">
                  <input type="checkbox" name="AHRS_Enabled" class="onoffswitch-checkbox" id="ahrs-onoffswitch" checked>
                  <label class="onoffswitch-label" for="ahrs-onoffswitch">
                      <span class="onoffswitch-inner"></span>
                      <span class="onoffswitch-switch"></span>
                  </label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
